<!DOCTYPE html>
<html lang="en">

<head>
    <!--====== Required meta tags ======-->
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!--====== Title ======-->
    <title> Golden Tour Home Page Three </title>
    <!--====== Favicon Icon ======-->
    <link rel="shortcut icon" href="assets/img/favicon.ico" type="img/png" />
    <!--====== Animate Css ======-->
    <link rel="stylesheet" href="assets/css/animate.min.css">
    <!--====== Bootstrap css ======-->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
    <!--====== Fontawesome css ======-->
    <link rel="stylesheet" href="assets/css/font-awesome.min.css" />
    <!--====== Flaticon css ======-->
    <link rel="stylesheet" href="assets/fonts/flaticon/flaticon.css" />
    <!--====== Magnific Popup css ======-->
    <link rel="stylesheet" href="assets/css/magnific-popup.css" />
    <!--====== Owl Carousel css ======-->
    <link rel="stylesheet" href="assets/css/slick.css" />
    <!--====== Nice Select ======-->
    <link rel="stylesheet" href="assets/css/nice-select.css" />
    <!--====== Bootstrap Datepicker ======-->
    <link rel="stylesheet" href="assets/css/bootstrap-datepicker.css" />
    <!--====== Default css ======-->
    <link rel="stylesheet" href="assets/css/default.css" />
    <!--====== Style css ======-->
    <link rel="stylesheet" href="assets/css/style.css?v='<?php echo time(); ?>'" />
</head>

<body>
    <!--[if lte IE 9]>
		<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
    <![endif]-->
    <!--====== PRELOader ======-->
    <div class="preloader d-flex align-items-center justify-content-center">
        <div class="cssload-container">
            <div class="cssload-loading"><i></i><i></i><i></i><i></i></div>
        </div>
    </div>


    <!--====== HEADER START ======-->
    <header class="header-absolute sticky-header inner-page">
        <div class="container container-custom-one">
            <div class="nav-container d-flex align-items-center justify-content-between">
                <!-- Main Menu -->
                <div class="nav-menu d-lg-flex align-items-center">

                    <!-- Navbar Close Icon -->
                    <div class="navbar-close">
                        <div class="cross-wrap"><span class="top"></span><span class="bottom"></span></div>
                    </div>

                    <!-- Off canvas Menu  -->
                    <div class="toggle">
                        <a href="#" id="offCanvasBtn"><i class="fal fa-bars"></i></a>
                    </div>
                    <!-- Mneu Items -->
                    <div class="menu-items">
                        <ul>
                            <li>
                                <a href="index.html">Home</a>
                                <ul class="submenu">
                                    <li><a href="index.html">Home One</a></li>
                                    <li><a href="index-2.html">Home Two</a></li>
                                    <li><a href="index-3.html">Home Three</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="destination-grid.html">Destinations</a>
                                <ul class="submenu">
                                    <li><a href="destination-grid.html">Destination Grid</a></li>
                                    <li><a href="destination-list.html">Destination List</a></li>
                                    <li><a href="destination-details.html">Destination Details</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="news.html">News</a>
                                <ul class="submenu">
                                    <li><a href="news-details.html">News Details</a></li>
                                </ul>
                            </li>
                            <li><a href="contact.html">Contact</a></li>
                        </ul>
                    </div>

                    <!-- from pushed-item -->
                    <div class="nav-pushed-item"></div>
                </div>

                <!-- Site Logo -->
                <div class="site-logo">
                    <a href="index.html"><img src="assets/img/logo.png" alt="Logo"></a>
                </div>

                <!-- Header Info Pussed To Menu Wrap -->
                <div class="nav-push-item">
                    <!-- Header Info -->
                    <div class="header-info d-lg-flex align-items-center">
                        <div class="item">
                            <i class="fal fa-phone"></i>
                            <span>Phone Number</span>
                            <a href="tel:+90898787709">
                                <h5 class="title">+908 987 877 09</h5>
                            </a>
                        </div>
                        <div class="item">
                            <i class="fal fa-envelope"></i>
                            <span>Email Address</span>
                            <a href="mailto:info@webmail.com">
                                <h5 class="title">info@webmail.com</h5>
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Navbar Toggler -->
                <div class="navbar-toggler">
                    <span></span><span></span><span></span>
                </div>
            </div>
        </div>
    </header>
    <!--====== HEADER PART END ======-->



    <!--====== OFF CANVAS START ======-->
    <div class="offcanvas-wrapper">
        <div class="offcanvas-overly"></div>
        <div class="offcanvas-widget">
            <a href="#" class="offcanvas-close"><i class="fal fa-times"></i></a>

            <!-- About Widget -->
            <div class="widget about-widget">
                <h5 class="widget-title">About us</h5>
                <p>
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Quia reiciendis illo ipsa asperiores,
                    perspiciatis corrupti veritatis assumenda architecto commodi provident quas necessitatibus
                    consequatur praesentium magnam optio deserunt fugiat repellat culpa.
                </p>
            </div>
            <!-- Nav Widget -->
            <div class="widget nav-widget">
                <h5 class="widget-title">Our pages</h5>
                <ul>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="menu.html">Food Menu</a></li>
                    <li><a href="restaurant.html">Restaurant</a></li>
                    <li>
                        <a href="places.html">Places</a>
                        <ul class="submenu">
                            <li><a href="places-details.html">Places Details</a></li>
                        </ul>
                    </li>
                    <li><a href="offers.html">Offers</a></li>
                    <li><a href="gallery.html">Our Gallery</a></li>
                    <li><a href="search-result.html">Search Result</a></li>
                    <li><a href="booking.html">Booking</a></li>
                </ul>
            </div>
            <!-- Social Link -->
            <div class="widget social-link">
                <h5 class="widget-title">Contact with us</h5>
                <ul>
                    <li><a href="#"><i class="fab fa-facebook-f"></i></a></li>
                    <li><a href="#"><i class="fab fa-twitter"></i></a></li>
                    <li><a href="#"><i class="fab fa-behance"></i></a></li>
                    <li><a href="#"><i class="fab fa-linkedin"></i></a></li>
                    <li><a href="#"><i class="fab fa-google"></i></a></li>
                </ul>
            </div>
        </div>
    </div>
    <!--====== OFF CANVAS END ======-->

    <!--====== BREADCRUMB PART START ======-->
    <section class="breadcrumb-area" style="background-image: url(assets/img/bg/04.jpg);">
        <div class="container">
            <div class="breadcrumb-text">
                <span>The ultimate luxury</span>
                <h2 class="page-title">Contact us</h2>

                <ul class="breadcrumb-nav">
                    <li><a href="#">Home</a></li>
                    <li class="active">Contact</li>
                </ul>
            </div>
        </div>
    </section>
    <!--====== BREADCRUMB PART END ======-->


    <!--====== BOOKING FORM START ======-->
    <section class="booking-form">
        <div class="container">
            <div class="booking-form-inner">
                <form id="compForm" enctype="multipart/form-data">
                    <div class="row align-items-end">
                        <div class="col-lg-4 col-md-6">
                            <div class="inputs-filed mt-30">
                                <label for="arrival-date">Logo de La Compagnie</label>
                                <div class="icon"><i class="fal fa-file-alt"></i></div>
                                <input type="file" name="compLogo" id="compLogo" required>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <div class="inputs-filed mt-30">
                                <label for="departure-date">Nom de la Compagnie</label>
                                <div class="icon"><i class="fal fa-text-alt"></i></div>
                                <input type="text" placeholder="Africa Tour..." name="compName" id="compName" required>
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-6">
                            <div class="inputs-filed mt-30">
                                <button type="submit">ajouter compagnie</button>
                            </div>
                        </div>
                    </div>
                    <div class="progress-bar"></div>
                </form>
            </div>
        </div>
    </section>
    <!--====== BOOKING FORM END ======-->


    <!--====== ABOUT PART START ======-->
    <section class="about-section pt-115 pb-115">
        <div class="container">
            <div class="down-arrow-wrap text-center">
                <a href="#addTicketPopup" id="showTicketForm" class="down-arrow"><i class="fal fa-plus"></i></a>
            </div>
        </div>
    </section>
    <!--====== ABOUT PART END ======-->





    <!--====== FOOTER PART START ======-->
    <footer>
        <div class="footer-subscibe-area pt-120 pb-120">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="subscribe-text text-center">
                            <div class="footer-logo mb-45">
                                <img src="assets/img/logo-2.png" alt="images">
                            </div>
                            <p>
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed doing
                                eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                                quis nostrud exercitation ullamco laboris nisi.
                            </p>
                            <form action="#" class="subscribe-form mt-50">
                                <input type="email" placeholder="Enter your email address">
                                <button type="submit">subscribe</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="copyright-area pt-20 pb-20">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-5 order-2 order-md-1">
                        <p class="copyright-text">copyright by Metropolitantheme</p>
                    </div>
                    <div class="col-md-7 order-1 order-md-2">
                        <div class="social-links">
                            <a href="#"><i class="fab fa-facebook-f"></i></a>
                            <a href="#"><i class="fab fa-twitter"></i></a>
                            <a href="#"><i class="fab fa-behance"></i></a>
                            <a href="#"><i class="fab fa-linkedin"></i></a>
                            <a href="#"><i class="fab fa-youtube"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--====== FOOTER PART END ======-->


    <div id="popup" style="display:none;">
        <img src="assets/images/loader.gif" alt="">

    </div>

    <div id="addTicketPopup" class="white-popup mfp-hide">
        <div class="section-title text-center mb-30">
            <h3>Ajoutez Ticket</h3>
        </div>
        <!-- Contact Form -->
        <div class="contact-form">
            <form class="mf_form_validate ajax_submit" id="addTicketForm">
                <div class="row">
                <div class="col-md-12">
                        <div class="input-group mb-30">
                            <span class="icon"><i class="far"></i></span>
                            <select id="compSelect" class="form-control" aria-label="Default select example"  required>
                                <option selected>Compagnie</option>
                               
                            </select>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="input-group mb-30">
                            <span class="icon"><i class="far fa-user"></i></span>
                            <input type="text" id="destination" placeholder="Destination"  required>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="input-group mb-30">
                            <span class="icon"><i class="far fa-envelope"></i></span>
                            <input type="text" id="departure_place" placeholder="Lieu de depart"  required>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="input-group mb-30">
                            <span class="icon"><i class="far fa-phone"></i></span>
                            <input type="number" id="total_number" placeholder="Nombre total de places!"  required>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="input-group mb-30">
                            <span class="icon"><i class="far"></i></span>
                            <select class="form-control" id="bus_type" aria-label="Default select example"  required>
                                <option selected>Type de Bus</option>
                                <option value="1">One</option>
                                <option value="2">Two</option>
                                <option value="3">Three</option>
                            </select>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="input-group mb-30">
                            <span class="icon"><i class="far"></i></span>
                            <input type="number" id="price" placeholder="Prix d'un ticket!"  required>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="input-group mb-30">
                            <span class="icon"><i class="far fa-date"></i></span>
                            <input type="date" id="departure_date" placeholder="Date de depart!"  required>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="input-group mb-30">
                            <span class="icon"><i class="far fa-time"></i></span>
                            <input type="text" id="departure_hour" placeholder="Heure de depart!" required>
                        </div>
                    </div>


                    <div class="col-12 text-center">
                        <button type="submit" class="main-btn btn-filled">Ajouter Ticket</button>
                        <div id="compError" class="server_response w-100">
                        </div>
                    </div>
                </div>
            </form>
           
        </div>

    </div>

    <div id="overlay" style="display: none;"></div>



    <!--====== jquery js ======-->
    <script src="assets/js/vendor/modernizr-3.6.0.min.js"></script>
    <script src="assets/js/vendor/jquery-1.12.4.min.js"></script>
    <!--====== Bootstrap js ======-->
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/popper.min.js"></script>
    <!--====== Slick js ======-->
    <script src="assets/js/slick.min.js"></script>
    <!--====== Isotope js ======-->
    <script src="assets/js/isotope.pkgd.min.js"></script>
    <!--====== Magnific Popup js ======-->
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <!--====== inview js ======-->
    <script src="assets/js/jquery.inview.min.js"></script>
    <!--====== counterup js ======-->
    <script src="assets/js/jquery.countTo.js"></script>
    <!--====== Nice Select ======-->
    <script src="assets/js/jquery.nice-select.min.js"></script>
    <!--====== Bootstrap datepicker ======-->
    <script src="assets/js/bootstrap-datepicker.js"></script>
    <!--====== Wow JS ======-->
    <script src="assets/js/wow.min.js"></script>
    <!--====== Google Map ======-->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDC3Ip9iVC0nIxC6V14CKLQ1HZNF_65qEQ"></script>
    <script src="assets/js/map.js"></script>
    <!--====== Main js ======-->
    <script src="assets/js/main.js"></script>

    <script>
        $(document).ready(function() {
            $("#showTicketForm").magnificPopup({
                type: "inline",
            });


            $.post("php/ajax.inc.php",{compFetchSubmit:"action"}, function(data){
                if(JSON.parse(data)){
                    var allComp = JSON.parse(data);
                    console.log(allComp);
                    allComp.forEach(element => {
                        var compOption = `
                        <option value="${element.compId}"> ${element.compName} </option>
                        `;
                        $("#compSelect").append(compOption);
                        $("select").niceSelect('update');
                        
                    });
                }else{
                    alert("Hell No!No JSON file returned!");
                }

            });

            // Add Ticket Form
            $("#addTicketForm").submit(function(e){
                e.preventDefault();
                var company =$("#compSelect").val();
                alert(company);
                var price = $("#price").val();
                var bus_type = $("#bus_type").val();
                var destination =$("#destination").val();
                var departure_date = $("#departure_date").val();
                var departure_hour = $("#departure_hour").val();
                var total_number = $("#total_number").val();
                var departure_place=$("#departure_place").val();

                $.post("php/ajax.inc.php",{
                    addTicketSubmit:"action",
                    company:company,
                    price:price,
                    bus_type:bus_type,
                    destination:destination,
                    departure_place:departure_place,
                    departure_hour:departure_hour,
                    total_number:total_number,
                    departure_date: departure_date
                },function(data){
                    if (data != "Success!") {
                           $("#compError").html('<p style="color: red">' + data +'</p>');

                        } else {
                            $("#compError").html('<p style="color:green"> Ticket Ajoute!</p>');
                        }

                    
                });
            });

            // Add Company Request 
            $("#compForm").submit(function(e) {
                e.preventDefault();
                var formData = new FormData(this);
                formData.append("compSubmit", "action");
                formData.append("compLogo", $("#compLogo").prop('files')[0]);
                $.ajax({
                    xhr: function() {
                        var xhr = new window.XMLHttpRequest();
                        xhr.upload.addEventListener("progress", function(evt) {
                            if (evt.lengthComputable) {
                                var percentComplete = ((evt.loaded / evt.total) * 100);
                                $(".progress-bar").width(percentComplete + '%');
                                $(".progress-bar").html(percentComplete + '%');
                            }
                        }, false);
                        return xhr;
                    },
                    type: 'POST',
                    url: 'php/ajax.inc.php',
                    data: formData,
                    contentType: false,
                    cache: false,
                    processData: false,
                    beforeSend: function() {
                        $(".progress-bar").width('0%');
                        $("#popup").show();
                        $("#overlay").show();

                    },
                    error: function() {
                        alert("Unexpected Error");
                    },
                    success: function(data, status) {
                        if (data != "Success!") {
                            showErrorMessage(data);

                        } else {
                            showSuccessMessage("Compagnie ajoute avex succes!");
                        }




                    }
                });

            });








            //Function to show Error

            function showErrorMessage(data) {
                $("#popup").html('<img src="assets/images/errorInfo.png" alt=""> <p>' + data + '</p>');


                setTimeout(function() {
                    $("#popup").hide();
                    $("#overlay").hide();
                    $("#popup").html(' <img src="assets/images/loader.gif" alt=""> ');
                    $.magnificPopup.close();
                }, 3000);

            }

            function showSuccessMessage(data) {
                $("#popup").html('<img src="assets/images/success.png" alt=""> <p>' + data + '</p>');


                setTimeout(function() {
                    $("#popup").hide();
                    $("#overlay").hide();
                    $("#popup").html(' <img src="assets/images/loader.gif" alt=""> ');
                    $.magnificPopup.close();
                }, 3000);

            }

        });
    </script>
    
</body>

</html>